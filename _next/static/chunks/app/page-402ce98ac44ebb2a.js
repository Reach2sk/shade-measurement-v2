(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2048:(e,t,s)=>{Promise.resolve().then(s.bind(s,2227))},2227:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var n=s(5155),a=s(2115);function l(e){return Math.ceil(16*e)/16}function i(e){let t=l(e),s=Math.floor(t),n=t-s;if(0===n)return"".concat(s,'"');let{numerator:a,denominator:i}=function(e,t){let s=function e(t,s){return 0===s?t:e(s,t%s)}(e,16);return{numerator:e/s,denominator:t/s}}(Math.round(16*n),16);return 0===s?"".concat(a,"/").concat(i,'"'):"".concat(s," ").concat(a,"/").concat(i,'"')}function r(e){return"".concat(Math.round(100*e),"%")}function c(){let[e,t]=(0,a.useState)("home"),[s,i]=(0,a.useState)(null),[r,c]=(0,a.useState)([]),[g,b]=(0,a.useState)(!1),f=r.length>0?function(e){let t;if(0===e.length)return{widthInches:0,heightInches:0,averageConfidence:0,category:"Not Great",passCount:0,passes:[]};let s=Math.max(...e.map(e=>e.widthInInches)),n=Math.max(...e.map(e=>e.heightInInches)),a=l(s),i=l(n),r=e.reduce((e,t)=>e+t.confidence,0)/e.length;return t=r>=.85?"Excellent":r>=.65?"OK":"Not Great",{widthInches:a,heightInches:i,averageConfidence:r,category:t,passCount:e.length,passes:e}}(r):null,y=e=>t(e);switch(e){case"home":return(0,n.jsx)(o,{onStart:()=>y("permission"),onSettings:()=>y("settings")});case"permission":return(0,n.jsx)(d,{onGranted:()=>y("mountSelection"),onBack:()=>y("home")});case"mountSelection":return(0,n.jsx)(m,{onSelect:e=>{i(e),y("pass1")},onBack:()=>y("permission")});case"pass1":case"pass2":case"pass3":let j="pass1"===e?1:"pass2"===e?2:3,N="pass1"===e?"mountSelection":"pass2"===e?"pass1Review":"pass2Review";return(0,n.jsxs)("div",{className:"h-screen flex flex-col bg-black",children:[(0,n.jsxs)("div",{className:"bg-gray-900 text-white p-4 flex items-center justify-between",children:[(0,n.jsx)("button",{onClick:()=>y(N),className:"text-white active:text-gray-400",style:{WebkitTapHighlightColor:"transparent"},children:"← Back"}),(0,n.jsxs)("span",{className:"font-semibold",children:["Pass ",j," of ",j<=2?"2+":"3"]}),(0,n.jsx)("div",{className:"w-12"})]}),(0,n.jsx)("div",{className:"flex-1 relative bg-gray-800",children:(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-700 to-gray-900 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-gray-400 text-sm mb-2",children:"Mock Camera View"}),(0,n.jsx)("div",{className:"border-2 border-dashed border-gray-500 w-48 h-64 mx-auto flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-gray-500 text-xs",children:"Window Frame"})})]})})}),(0,n.jsx)("div",{className:"bg-gray-900 p-6 flex justify-center",children:(0,n.jsx)("button",{onClick:()=>{g||(b(!0),setTimeout(()=>{let s=function(){let e=.7+.25*Math.random();return{widthInInches:35+2*Math.random(),heightInInches:47+2*Math.random(),confidence:e,category:e>=.85?"Excellent":e>=.65?"OK":"Not Great",timestamp:Date.now(),frameMetadata:{pxToInchUsed:null,detectorConfidence:e}}}();c(e=>[...e,s]),"pass1"===e?t("pass1Review"):"pass2"===e?t("pass2Review"):"pass3"===e&&t("completion"),b(!1)},500))},disabled:g,className:"w-20 h-20 rounded-full border-4 flex items-center justify-center bg-white border-gray-300 ".concat(g?"opacity-50":""),style:{WebkitTapHighlightColor:"transparent"},children:g?(0,n.jsx)("span",{className:"text-gray-600",children:"..."}):(0,n.jsx)("div",{className:"w-14 h-14 rounded-full bg-red-500"})})}),(0,n.jsxs)("div",{className:"bg-gray-900 text-white text-center pb-6 text-sm",children:[1===j&&"Position window in frame and capture",2===j&&"Capture from a slightly different angle",3===j&&"Optional: One more capture for better accuracy"]})]});case"pass1Review":case"pass2Review":let w="pass1Review"===e?1:2,v=r[r.length-1],k=function(e){if(0===e.length)return{recommend:!1,reason:"No passes yet"};if(e.length>=3)return{recommend:!1,reason:"Maximum passes reached"};if(e.reduce((e,t)=>e+t.confidence,0)/e.length<.65)return{recommend:!0,reason:"Low confidence - an additional pass may improve accuracy"};if(e.length>=2){let t=e.map(e=>e.widthInInches),s=e.map(e=>e.heightInInches),n=Math.max(...s)-Math.min(...s);if(Math.max(...t)-Math.min(...t)>1||n>1)return{recommend:!0,reason:"Measurements vary between passes - an additional pass may help"}}return{recommend:!1,reason:"Measurements look good"}}(r);return(0,n.jsx)(x,{passNumber:w,result:v,showPass3Option:2===w,recommendPass3:k.recommend,recommendReason:k.reason,onContinue:()=>{1===w?y("pass2"):k.recommend?y("pass3"):y("completion")},onSkipToResults:2===w?()=>y("completion"):void 0,onBack:()=>y(1===w?"pass1":"pass2")});case"completion":if(!f)return null;return(0,n.jsx)(h,{width:f.widthInches,height:f.heightInches,confidence:f.averageConfidence,category:f.category,passCount:f.passCount,mountType:s,onViewDetails:()=>y("details"),onSettings:()=>y("settings"),onRestart:()=>{c([]),i(null),t("home")}});case"details":return(0,n.jsx)(u,{passes:r,onBack:()=>y("completion")});case"settings":return(0,n.jsx)(p,{onBack:()=>y(f?"completion":"home")});default:return(0,n.jsx)("div",{children:"Unknown screen"})}}function o(e){let{onStart:t,onSettings:s}=e;return(0,n.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-white",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Window Measurement"}),(0,n.jsx)("p",{className:"text-gray-600 mb-8 text-center",children:"Measure your windows for perfect-fit shades"}),(0,n.jsx)("button",{onClick:t,className:"bg-blue-600 text-white px-8 py-4 rounded-lg text-lg font-semibold mb-4 w-full max-w-xs active:bg-blue-700 select-none",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:"Start Measuring"}),(0,n.jsx)("button",{onClick:s,className:"text-gray-500 text-sm select-none",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:"Settings"}),(0,n.jsx)("p",{className:"text-gray-400 text-xs mt-8",children:"Version 0.1.2"})]})}function d(e){let{onGranted:t,onBack:s}=e,[l,i]=(0,a.useState)(!1);return(0,n.jsxs)("div",{className:"min-h-screen flex flex-col p-6 bg-white",children:[(0,n.jsx)("button",{onClick:s,className:"text-blue-600 mb-8 select-none",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:"← Back"}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center",children:[(0,n.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-6",children:(0,n.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCF7"})}),(0,n.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Camera Access"}),(0,n.jsx)("p",{className:"text-gray-600 mb-8 text-center",children:"We need access to your camera to measure your windows."}),(0,n.jsx)("button",{onClick:()=>{i(!0),setTimeout(()=>{i(!1),t()},500)},disabled:l,className:"bg-blue-600 text-white px-8 py-4 rounded-lg text-lg font-semibold w-full max-w-xs active:bg-blue-700 select-none",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:l?"Requesting...":"Allow Camera Access"})]})]})}function m(e){let{onSelect:t,onBack:s}=e;return(0,n.jsxs)("div",{className:"min-h-screen flex flex-col p-6 bg-white",children:[(0,n.jsx)("button",{onClick:s,className:"text-blue-600 mb-8 select-none",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:"← Back"}),(0,n.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Mount Type"}),(0,n.jsx)("p",{className:"text-gray-600 mb-8",children:"How will your shades be mounted?"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("button",{onClick:()=>t("inside"),className:"w-full p-6 border-2 border-gray-200 rounded-lg text-left active:border-blue-600 select-none",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:[(0,n.jsx)("span",{className:"font-semibold text-gray-900",children:"Inside Mount"}),(0,n.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"Shade fits inside the window frame"})]}),(0,n.jsxs)("button",{onClick:()=>t("outside"),className:"w-full p-6 border-2 border-gray-200 rounded-lg text-left active:border-blue-600 select-none",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:[(0,n.jsx)("span",{className:"font-semibold text-gray-900",children:"Outside Mount"}),(0,n.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"Shade covers the window from outside"})]})]})]})}function x(e){let{passNumber:t,result:s,showPass3Option:a,recommendPass3:c,recommendReason:o,onContinue:d,onSkipToResults:m,onBack:x}=e,h=i(l(s.widthInInches)),u=i(l(s.heightInInches));return(0,n.jsxs)("div",{className:"min-h-screen flex flex-col p-6 bg-white",children:[(0,n.jsx)("button",{onClick:x,className:"text-blue-600 mb-8 select-none",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:"← Back"}),(0,n.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:["Pass ",t," Complete"]}),(0,n.jsx)("div",{className:"bg-gray-100 rounded-lg p-6 mb-6",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("p",{className:"text-gray-600 text-sm",children:"Measured Dimensions"}),(0,n.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[h," \xd7 ",u]}),(0,n.jsx)("p",{className:"text-sm mt-2",children:(0,n.jsxs)("span",{className:"inline-block px-2 py-1 rounded ".concat("Excellent"===s.category?"bg-green-100 text-green-800":"OK"===s.category?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[s.category," (",r(s.confidence),")"]})})]})}),a&&c&&(0,n.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:(0,n.jsx)("p",{className:"text-amber-800 text-sm",children:o})}),(0,n.jsxs)("div",{className:"mt-auto space-y-3",children:[(0,n.jsx)("button",{onClick:d,className:"bg-blue-600 text-white px-8 py-4 rounded-lg text-lg font-semibold w-full active:bg-blue-700 select-none",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:1===t?"Continue to Pass 2":c?"Take Pass 3":"View Results"}),a&&m&&(0,n.jsx)("button",{onClick:m,className:"text-gray-600 py-2 w-full select-none",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:c?"Skip and View Results":"View Results"})]})]})}function h(e){let{width:t,height:s,confidence:a,category:l,passCount:c,mountType:o,onViewDetails:d,onSettings:m,onRestart:x}=e;return(0,n.jsxs)("div",{className:"min-h-screen flex flex-col p-6 bg-white",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2 text-center",children:"Measurement Complete"}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center",children:[(0,n.jsxs)("div",{className:"bg-gray-100 rounded-lg p-8 w-full max-w-sm",children:[(0,n.jsxs)("p",{className:"text-gray-600 text-sm text-center",children:["Final Dimensions (",o," mount)"]}),(0,n.jsx)("p",{className:"text-3xl font-bold text-gray-900 text-center mt-2",children:function(e,t){let s=i(e),n=i(t);return"".concat(s," \xd7 ").concat(n)}(t,s)}),(0,n.jsxs)("div",{className:"mt-6 text-center",children:[(0,n.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-semibold ".concat("Excellent"===l?"bg-green-100 text-green-800":"OK"===l?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:l}),(0,n.jsxs)("p",{className:"text-gray-500 text-sm mt-2",children:[r(a)," confidence • ",c," passes"]})]})]}),"Not Great"===l&&(0,n.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mt-6 max-w-sm",children:(0,n.jsx)("p",{className:"text-amber-800 text-sm text-center",children:"Consider measuring again for better accuracy"})})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("button",{onClick:d,className:"bg-gray-100 text-gray-900 px-8 py-4 rounded-lg font-semibold w-full select-none",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:"View Details"}),(0,n.jsx)("button",{onClick:x,className:"bg-blue-600 text-white px-8 py-4 rounded-lg font-semibold w-full active:bg-blue-700 select-none",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:"Measure Another Window"}),(0,n.jsx)("button",{onClick:m,className:"text-gray-500 text-sm w-full select-none",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:"Settings"})]})]})}function u(e){let{passes:t,onBack:s}=e;return(0,n.jsxs)("div",{className:"min-h-screen flex flex-col p-6 bg-white",children:[(0,n.jsx)("button",{onClick:s,className:"text-blue-600 mb-8 select-none",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:"← Back"}),(0,n.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Measurement Details"}),(0,n.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>(0,n.jsxs)("div",{className:"bg-gray-100 rounded-lg p-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,n.jsxs)("span",{className:"font-semibold text-gray-900",children:["Pass ",t+1]}),(0,n.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat("Excellent"===e.category?"bg-green-100 text-green-800":"OK"===e.category?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.category})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-gray-500",children:"Width"}),(0,n.jsx)("p",{className:"font-mono",children:i(l(e.widthInInches))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-gray-500",children:"Height"}),(0,n.jsx)("p",{className:"font-mono",children:i(l(e.heightInInches))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-gray-500",children:"Confidence"}),(0,n.jsx)("p",{children:r(e.confidence)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-gray-500",children:"Time"}),(0,n.jsx)("p",{children:new Date(e.timestamp).toLocaleTimeString()})]})]})]},t))})]})}function p(e){let{onBack:t}=e;return(0,n.jsxs)("div",{className:"min-h-screen flex flex-col p-6 bg-white",children:[(0,n.jsx)("button",{onClick:t,className:"text-blue-600 mb-8 select-none",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:"← Back"}),(0,n.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Settings"}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Debug Info"}),(0,n.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"This is a simplified version for testing Safari button clicks."})]}),(0,n.jsx)("div",{className:"pt-6 border-t border-gray-200",children:(0,n.jsxs)("p",{className:"text-gray-500 text-xs",children:["Window Measurement App v0.1.2",(0,n.jsx)("br",{}),"Simplified Mock Provider (no context wrapper)"]})})]})]})}function g(){return(0,n.jsx)(c,{})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=2048)),_N_E=e.O()}]);